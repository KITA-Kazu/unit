<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>わくわく！たんいマスターへの冒険 - クイズ版</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@500;700;800&display=swap" rel="stylesheet">
    <style>
        /* --- 全体のスタイル --- */
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: linear-gradient(135deg, #a8e0ff 0%, #f0f8ff 100%);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #333;
            text-align: center;
        }

        .container {
            background-color: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            width: 95%;
            max-width: 700px;
        }

        /* --- 画面の切り替え --- */
        .screen {
            display: none; /* 最初はすべての画面を隠す */
        }
        .screen.active {
            display: block; /* activeクラスがついた画面だけ表示 */
        }

        /* --- 見出しとテキスト --- */
        h1 {
            color: #005a9c;
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        h2 {
            color: #0077cc;
            font-size: 1.8rem;
            margin-bottom: 25px;
        }

        p {
            font-size: 1.2rem;
            line-height: 1.6;
        }

        .character-message {
            background-color: #eef7ff;
            border-left: 5px solid #4a90e2;
            padding: 15px;
            margin: 20px 0;
            border-radius: 8px;
            font-size: 1.1rem;
            text-align: left;
        }

        /* --- ボタン --- */
        .btn-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .btn {
            background: linear-gradient(135deg, #50e3c2 0%, #34c7a9 100%);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 14px rgba(0, 0, 0, 0.1);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #ffc107 0%, #ff9800 100%);
        }

         .btn-answer {
            background-color: #fff;
            color: #0077cc;
            border: 2px solid #0077cc;
            font-size: 1.4rem;
            padding: 15px;
            border-radius: 10px;
            transition: background-color 0.2s, color 0.2s, border-color 0.2s;
            width: 100%;
            box-shadow: none;
        }

        .btn-answer:hover:not(:disabled) {
             background-color: #eef7ff;
             transform: none;
             box-shadow: none;
        }
         .btn-answer:active:not(:disabled) {
             background-color: #ddedff;
             transform: none;
         }
         
        .btn-answer:disabled { /* 回答後のスタイル */
            cursor: not-allowed;
            opacity: 0.7;
        }

        .btn-back {
            background: #aaa;
            margin-top: 30px;
            padding: 10px 20px;
            font-size: 1rem;
        }

        /* --- 問題画面のスタイル --- */
        #question-area {
            background-color: #fff9e6;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px dashed #ffc107;
        }

        #game-status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        #timer-area {
            font-size: 1.5rem;
            font-weight: bold;
            color: #d9534f;
        }

        #score-board {
            font-size: 1.5rem;
            font-weight: bold;
            color: #005a9c;
        }

        #question-text {
            font-size: 1.8rem;
            font-weight: 800;
            color: #333;
            margin-bottom: 25px;
        }
        
        #choices-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        /* --- フィードバックのスタイル --- */
        #feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.5rem;
            font-weight: bold;
            display: none;
            animation-duration: 0.5s;
        }

        #feedback.correct {
            background-color: #dff0d8;
            color: #3c763d;
            border: 2px solid #d6e9c6;
            display: block;
            animation-name: bounce;
        }

        #feedback.incorrect {
            background-color: #f2dede;
            color: #a94442;
            border: 2px solid #ebccd1;
            display: block;
            animation-name: shake;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* --- 結果画面のスタイル --- */
        #medal-area {
            margin-bottom: 20px;
        }
        #medal-icon {
            font-size: 7rem;
            display: block;
            margin-bottom: 10px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        }
        #medal-name {
            font-size: 2.2rem;
            color: #005a9c;
            margin: 0;
        }
        #final-score-text {
            font-size: 2.8rem;
            font-weight: 800;
            color: #d9534f;
            margin: 10px 0;
        }
        .highlight {
            color: #d9534f;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <!-- 画面1: スタート画面 -->
        <div id="start-screen" class="screen active">
            <h1>わくわく！<br>たんいマスターへの冒険</h1>
            <p class="character-message">
                <span style="font-size: 2rem; vertical-align: middle;">🎓</span>
                やあ、わたしはたんい博士じゃ！<br>
                これからキミをたんいの世界へあんないするぞ。<br>
                <span class="highlight">1分間</span>でどれだけ多くの問題にチャレンジできるかな？
            </p>
            <button class="btn" onclick="showScreen('unit-select-screen')">冒険をはじめる！</button>
        </div>

        <!-- 画面2: 単位選択画面 -->
        <div id="unit-select-screen" class="screen">
            <h2>どの単位を冒険する？</h2>
            <div class="btn-grid">
                <button class="btn" onclick="selectUnit('length')">📏 長さ</button>
                <button class="btn" onclick="selectUnit('weight')">⚖️ 重さ</button>
                <button class="btn" onclick="selectUnit('volume')">💧 かさ</button>
                <button class="btn" onclick="selectUnit('time')">⏰ 時間</button>
                <button class="btn" onclick="selectUnit('area')">🗺️ 面積</button>
            </div>
            <button class="btn btn-back" onclick="showScreen('start-screen')">もどる</button>
        </div>

        <!-- 画面3: モード選択画面 -->
        <div id="mode-select-screen" class="screen">
            <h2 id="mode-select-title">モードをえらぼう！</h2>
            <div class="btn-grid">
                <button class="btn" onclick="selectMode('practice')">💪 換算練習モード</button>
                <button class="btn btn-secondary" onclick="selectMode('sense')">💡 単位感覚モード</button>
            </div>
            <button class="btn btn-back" onclick="showScreen('unit-select-screen')">たんいをえらびなおす</button>
        </div>

        <!-- 画面4: レベル選択画面 (換算練習モード) -->
        <div id="level-select-screen" class="screen">
            <h2>むずかしさをえらんでね</h2>
            <div class="btn-grid">
                <button class="btn" onclick="startPractice('easy')">🔰 初級 (かんたんな整数)</button>
                <button class="btn" onclick="startPractice('medium')">⭐ 中級 (10の倍数など)</button>
                <button class="btn" onclick="startPractice('hard')">🔥 上級 (小数・合わさった単位)</button>
            </div>
            <button class="btn btn-back" onclick="showScreen('mode-select-screen')">モードをえらびなおす</button>
        </div>

        <!-- 画面5: 問題画面 -->
        <div id="question-screen" class="screen">
             <h2 id="question-screen-title">もんだい！</h2>
            <div id="game-status-bar">
                <div id="score-board">とくてん: <span id="score">0</span>点</div>
                <div id="timer-area">のこり時間: <span id="timer-count">60</span>びょう</div>
            </div>

            <div id="question-area">
                <div id="question-text">ここに問題がでます</div>
            </div>

            <div id="choices-grid">
                <!-- 回答選択肢ボタンがここにJSで挿入される -->
            </div>

            <div id="feedback"></div>

            <button class="btn btn-back" onclick="backToModeSelect()">もどる</button>
        </div>

        <!-- 画面6: 結果画面 -->
        <div id="result-screen" class="screen">
            <h2>けっか はっぴょう！</h2>
            <div id="medal-area">
                <span id="medal-icon"></span>
                <h3 id="medal-name"></h3>
            </div>
            <p>あなたのとくてんは...</p>
            <p id="final-score-text"><span id="final-score">0</span>点</p>
            <div id="result-message" class="character-message"></div>
            <div class="btn-grid">
                <button class="btn" onclick="restartQuiz()">もういちどチャレンジ！</button>
                <button class="btn btn-secondary" onclick="showScreen('start-screen')">トップにもどる</button>
            </div>
        </div>

    </div>

    <script>
        // --- データ定義 ---
        const practiceQuestions = {
            length: {
                easy: [
                    { q: '1km', a: 1000, unit: 'm', incorrects: [100, 10, 10000] },
                    { q: '3km', a: 3000, unit: 'm', incorrects: [300, 30, 30000] },
                    { q: '1m', a: 100, unit: 'cm', incorrects: [10, 1000, 1] },
                    { q: '5m', a: 500, unit: 'cm', incorrects: [50, 5000, 5] },
                    { q: '2000m', a: 2, unit: 'km', incorrects: [0.2, 20, 200] },
                    { q: '400cm', a: 4, unit: 'm', incorrects: [0.4, 40, 4000] },
                    { q: '7km', a: 7000, unit: 'm', incorrects: [700, 70, 70000] },
                    { q: '9m', a: 900, unit: 'cm', incorrects: [90, 9000, 9] },
                    { q: '6000m', a: 6, unit: 'km', incorrects: [0.6, 60, 600] },
                    { q: '800cm', a: 8, unit: 'm', incorrects: [0.8, 80, 8000] },
                    { q: '2km', a: 2000, unit: 'm', incorrects: [200, 20, 20000] },
                    { q: '6m', a: 600, unit: 'cm', incorrects: [60, 6000, 6] },
                    { q: '5000m', a: 5, unit: 'km', incorrects: [0.5, 50, 500] },
                    { q: '300cm', a: 3, unit: 'm', incorrects: [0.3, 30, 3000] },
                    { q: '10km', a: 10000, unit: 'm', incorrects: [1000, 100, 100000] },
                    { q: '10m', a: 1000, unit: 'cm', incorrects: [100, 10, 10000] },
                    { q: '7000m', a: 7, unit: 'km', incorrects: [0.7, 70, 700] },
                    { q: '900cm', a: 9, unit: 'm', incorrects: [0.9, 90, 9000] },
                    { q: '4km', a: 4000, unit: 'm', incorrects: [400, 40, 40000] },
                    { q: '8m', a: 800, unit: 'cm', incorrects: [80, 8000, 8] }
                ],
                medium: [
                    { q: '10km', a: 10000, unit: 'm', incorrects: [1000, 100, 100000] },
                    { q: '20m', a: 2000, unit: 'cm', incorrects: [200, 20, 20000] },
                    { q: '30000m', a: 30, unit: 'km', incorrects: [3, 300, 3000] },
                    { q: '500cm', a: 5, unit: 'm', incorrects: [0.5, 50, 5000] },
                    { q: '100km', a: 100000, unit: 'm', incorrects: [10000, 1000, 1000000] },
                    { q: '50m', a: 5000, unit: 'cm', incorrects: [500, 50, 50000] },
                    { q: '80000m', a: 80, unit: 'km', incorrects: [8, 800, 8000] },
                    { q: '1200cm', a: 12, unit: 'm', incorrects: [1.2, 120, 12000] },
                    { q: '150km', a: 150000, unit: 'm', incorrects: [15000, 1500, 1500000] },
                    { q: '70m', a: 7000, unit: 'cm', incorrects: [700, 70, 70000] },
                    { q: '25000m', a: 25, unit: 'km', incorrects: [2.5, 250, 2500] },
                    { q: '3500cm', a: 35, unit: 'm', incorrects: [3.5, 350, 35000] },
                    { q: '60km', a: 60000, unit: 'm', incorrects: [6000, 600, 600000] },
                    { q: '90m', a: 9000, unit: 'cm', incorrects: [900, 90, 90000] },
                    { q: '45000m', a: 45, unit: 'km', incorrects: [4.5, 450, 4500] },
                    { q: '5500cm', a: 55, unit: 'm', incorrects: [5.5, 550, 55000] },
                    { q: '110km', a: 110000, unit: 'm', incorrects: [11000, 1100, 1100000] },
                    { q: '130m', a: 13000, unit: 'cm', incorrects: [1300, 130, 130000] },
                    { q: '75000m', a: 75, unit: 'km', incorrects: [7.5, 750, 7500] },
                    { q: '8500cm', a: 85, unit: 'm', incorrects: [8.5, 850, 85000] }
                ],
                hard: [
                    { q: '1.5km', a: 1500, unit: 'm', incorrects: [150, 15, 15000] },
                    { q: '2.3m', a: 230, unit: 'cm', incorrects: [23, 2.3, 2300] },
                    { q: '1m 20cm', a: 120, unit: 'cm', incorrects: [12, 1020, 20] },
                    { q: '2km 500m', a: 2500, unit: 'm', incorrects: [2005, 250, 2.5] },
                    { q: '350cm', a: 3.5, unit: 'm', incorrects: [35, 0.35, 3500] },
                    { q: '4500m', a: 4.5, unit: 'km', incorrects: [45, 0.45, 45000] },
                    { q: '0.8km', a: 800, unit: 'm', incorrects: [80, 8, 8000] },
                    { q: '5.1m', a: 510, unit: 'cm', incorrects: [51, 5.1, 5100] },
                    { q: '3m 5cm', a: 305, unit: 'cm', incorrects: [35, 3005, 5] },
                    { q: '0.7km 300m', a: 1000, unit: 'm', incorrects: [100, 730, 703] }, // 700+300
                    { q: '75cm', a: 0.75, unit: 'm', incorrects: [7.5, 750, 0.075] },
                    { q: '1200m', a: 1.2, unit: 'km', incorrects: [12, 0.12, 120] },
                    { q: '2.05km', a: 2050, unit: 'm', incorrects: [2005, 250, 20.5] },
                    { q: '0.9m', a: 90, unit: 'cm', incorrects: [9, 0.9, 900] },
                    { q: '4m 50cm', a: 450, unit: 'cm', incorrects: [45, 4050, 50] },
                    { q: '1km 200m', a: 1200, unit: 'm', incorrects: [1020, 120, 1.2] },
                    { q: '60cm', a: 0.6, unit: 'm', incorrects: [6, 600, 0.06] },
                    { q: '300m', a: 0.3, unit: 'km', incorrects: [3, 30, 3000] },
                    { q: '0.1km', a: 100, unit: 'm', incorrects: [10, 1, 1000] },
                    { q: '0.01m', a: 1, unit: 'cm', incorrects: [0.1, 10, 0.001] }
                ]
            },
            weight: {
                easy: [
                    { q: '1kg', a: 1000, unit: 'g', incorrects: [100, 10, 10000] },
                    { q: '4kg', a: 4000, unit: 'g', incorrects: [400, 40, 40000] },
                    { q: '1t', a: 1000, unit: 'kg', incorrects: [100, 10, 10000] },
                    { q: '3000g', a: 3, unit: 'kg', incorrects: [0.3, 30, 300] },
                    { q: '5kg', a: 5000, unit: 'g', incorrects: [500, 50, 50000] },
                    { q: '2t', a: 2000, unit: 'kg', incorrects: [200, 20, 20000] },
                    { q: '6000g', a: 6, unit: 'kg', incorrects: [0.6, 60, 600] },
                    { q: '4000kg', a: 4, unit: 't', incorrects: [0.4, 40, 400] },
                    { q: '8kg', a: 8000, unit: 'g', incorrects: [800, 80, 80000] },
                    { q: '3t', a: 3000, unit: 'kg', incorrects: [300, 30, 30000] },
                    { q: '7000g', a: 7, unit: 'kg', incorrects: [0.7, 70, 700] },
                    { q: '9000kg', a: 9, unit: 't', incorrects: [0.9, 90, 900] },
                    { q: '2kg', a: 2000, unit: 'g', incorrects: [200, 20, 20000] },
                    { q: '5t', a: 5000, unit: 'kg', incorrects: [500, 50, 50000] },
                    { q: '1000g', a: 1, unit: 'kg', incorrects: [0.1, 10, 100] },
                    { q: '1000kg', a: 1, unit: 't', incorrects: [0.1, 10, 100] },
                    { q: '9kg', a: 9000, unit: 'g', incorrects: [900, 90, 90000] },
                    { q: '6t', a: 6000, unit: 'kg', incorrects: [600, 60, 60000] },
                    { q: '8000g', a: 8, unit: 'kg', incorrects: [0.8, 80, 800] },
                    { q: '7000kg', a: 7, unit: 't', incorrects: [0.7, 70, 700] }
                ],
                medium: [
                    { q: '20kg', a: 20000, unit: 'g', incorrects: [2000, 200, 200000] },
                    { q: '50t', a: 50000, unit: 'kg', incorrects: [5000, 500, 500000] },
                    { q: '40000g', a: 40, unit: 'kg', incorrects: [4, 400, 4000] },
                    { q: '7000kg', a: 7, unit: 't', incorrects: [0.7, 70, 700] },
                    { q: '100kg', a: 100000, unit: 'g', incorrects: [10000, 1000, 1000000] },
                    { q: '80t', a: 80000, unit: 'kg', incorrects: [8000, 800, 800000] },
                    { q: '120000g', a: 120, unit: 'kg', incorrects: [12, 1200, 12000] },
                    { q: '30000kg', a: 30, unit: 't', incorrects: [3, 300, 3000] },
                    { q: '150kg', a: 150000, unit: 'g', incorrects: [15000, 1500, 1500000] },
                    { q: '25t', a: 25000, unit: 'kg', incorrects: [2500, 250, 250000] },
                    { q: '55000g', a: 55, unit: 'kg', incorrects: [5.5, 550, 5500] },
                    { q: '90000kg', a: 90, unit: 't', incorrects: [9, 900, 9000] },
                    { q: '200kg', a: 200000, unit: 'g', incorrects: [20000, 2000, 2000000] },
                    { q: '110t', a: 110000, unit: 'kg', incorrects: [11000, 1100, 1100000] },
                    { q: '75000g', a: 75, unit: 'kg', incorrects: [7.5, 750, 7500] },
                    { q: '60000kg', a: 60, unit: 't', incorrects: [6, 600, 6000] },
                     { q: '30kg', a: 30000, unit: 'g', incorrects: [3000, 300, 300000] },
                    { q: '40t', a: 40000, unit: 'kg', incorrects: [4000, 400, 400000] },
                    { q: '85000g', a: 85, unit: 'kg', incorrects: [8.5, 850, 8500] },
                    { q: '120000kg', a: 120, unit: 't', incorrects: [12, 1200, 12000] }
                ],
                hard: [
                    { q: '2.5kg', a: 2500, unit: 'g', incorrects: [250, 25, 25000] },
                    { q: '1.2t', a: 1200, unit: 'kg', incorrects: [120, 12, 12000] },
                    { q: '1kg 300g', a: 1300, unit: 'g', incorrects: [130, 1003, 300] },
                    { q: '2t 50kg', a: 2050, unit: 'kg', incorrects: [250, 2005, 50] },
                    { q: '800g', a: 0.8, unit: 'kg', incorrects: [8, 80, 8000] },
                    { q: '500kg', a: 0.5, unit: 't', incorrects: [5, 50, 5000] },
                    { q: '3.05kg', a: 3050, unit: 'g', incorrects: [305, 350, 3.5] },
                    { q: '0.8t', a: 800, unit: 'kg', incorrects: [80, 8, 8000] },
                    { q: '5kg 20g', a: 5020, unit: 'g', incorrects: [520, 5002, 20] },
                    { q: '1t 500kg', a: 1500, unit: 'kg', incorrects: [1050, 150, 1.5] },
                    { q: '150g', a: 0.15, unit: 'kg', incorrects: [1.5, 15, 1500] },
                    { q: '250kg', a: 0.25, unit: 't', incorrects: [2.5, 25, 2500] },
                    { q: '0.05kg', a: 50, unit: 'g', incorrects: [5, 0.5, 500] },
                    { q: '0.001t', a: 1, unit: 'kg', incorrects: [0.1, 10, 100] },
                    { q: '7kg 7g', a: 7007, unit: 'g', incorrects: [707, 77, 7070] },
                    { q: '3t 300kg', a: 3300, unit: 'kg', incorrects: [3030, 330, 3.3] },
                    { q: '450g', a: 0.45, unit: 'kg', incorrects: [4.5, 45, 4500] },
                    { q: '750kg', a: 0.75, unit: 't', incorrects: [7.5, 75, 7500] },
                    { q: '0.1kg', a: 100, unit: 'g', incorrects: [10, 1, 1000] },
                    { q: '0.1t', a: 100, unit: 'kg', incorrects: [10, 1000, 10000] }
                ]
            },
            volume: {
                easy: [
                    { q: '1L', a: 1000, unit: 'mL', incorrects: [100, 10, 10000] },
                    { q: '2L', a: 20, unit: 'dL', incorrects: [2, 0.2, 200] },
                    { q: '1L', a: 10, unit: 'dL', incorrects: [1, 100, 1000] },
                    { q: '3dL', a: 300, unit: 'mL', incorrects: [30, 3, 3000] },
                    { q: '2000mL', a: 2, unit: 'L', incorrects: [0.2, 20, 200] },
                    { q: '50dL', a: 5, unit: 'L', incorrects: [0.5, 500, 5000] },
                    { q: '5L', a: 5000, unit: 'mL', incorrects: [500, 50, 50000] },
                    { q: '8L', a: 80, unit: 'dL', incorrects: [8, 0.8, 800] },
                    { q: '6dL', a: 600, unit: 'mL', incorrects: [60, 6, 6000] },
                    { q: '4000mL', a: 4, unit: 'L', incorrects: [0.4, 40, 400] },
                    { q: '70dL', a: 7, unit: 'L', incorrects: [0.7, 700, 7000] },
                    { q: '3L', a: 3000, unit: 'mL', incorrects: [300, 30, 30000] },
                    { q: '12dL', a: 1200, unit: 'mL', incorrects: [120, 12, 12000] },
                    { q: '9000mL', a: 9, unit: 'L', incorrects: [0.9, 90, 900] },
                    { q: '1L 5dL', a: 15, unit: 'dL', incorrects: [10.5, 1.5, 150] },
                    { q: '1L 500mL', a: 1500, unit: 'mL', incorrects: [150, 1005, 500] },
                    { q: '300mL', a: 3, unit: 'dL', incorrects: [0.3, 30, 3000] },
                    { q: '400mL', a: 0.4, unit: 'L', incorrects: [4, 40, 4000] },
                    { q: '2dL', a: 200, unit: 'mL', incorrects: [20, 2, 2000] },
                    { q: '6L', a: 60, unit: 'dL', incorrects: [6, 0.6, 600] }
                ],
                medium: [
                    { q: '30L', a: 30000, unit: 'mL', incorrects: [3000, 300, 300000] },
                    { q: '40dL', a: 4, unit: 'L', incorrects: [0.4, 400, 4000] },
                    { q: '6000mL', a: 60, unit: 'dL', incorrects: [6, 600, 6000] },
                    { q: '15L', a: 15000, unit: 'mL', incorrects: [1500, 150, 150000] },
                    { q: '70dL', a: 7, unit: 'L', incorrects: [0.7, 700, 7000] },
                    { q: '8000mL', a: 80, unit: 'dL', incorrects: [8, 800, 8000] },
                    { q: '50L', a: 50000, unit: 'mL', incorrects: [5000, 500, 500000] },
                    { q: '100dL', a: 10, unit: 'L', incorrects: [1, 1000, 10000] },
                    { q: '15000mL', a: 150, unit: 'dL', incorrects: [15, 1500, 15000] },
                    { q: '25L', a: 25000, unit: 'mL', incorrects: [2500, 250, 250000] },
                    { q: '35000mL', a: 350, unit: 'dL', incorrects: [35, 3500, 35000] },
                    { q: '65dL', a: 6.5, unit: 'L', incorrects: [65, 650, 0.65] },
                    { q: '8500mL', a: 85, unit: 'dL', incorrects: [8.5, 850, 8500] },
                    { q: '120dL', a: 12, unit: 'L', incorrects: [1.2, 1200, 12000] },
                    { q: '50000mL', a: 50, unit: 'L', incorrects: [5, 500, 5000] },
                    { q: '20000mL', a: 200, unit: 'dL', incorrects: [20, 2000, 20000] },
                    { q: '90dL', a: 9, unit: 'L', incorrects: [0.9, 900, 9000] },
                    { q: '75000mL', a: 75, unit: 'L', incorrects: [7.5, 750, 7500] },
                    { q: '110dL', a: 11, unit: 'L', incorrects: [1.1, 1100, 11000] },
                    { q: '13000mL', a: 130, unit: 'dL', incorrects: [13, 1300, 13000] }
                ],
                hard: [
                    { q: '1.5L', a: 1500, unit: 'mL', incorrects: [150, 15, 15000] },
                    { q: '0.8L', a: 8, unit: 'dL', incorrects: [0.8, 80, 800] },
                    { q: '1L 2dL', a: 12, unit: 'dL', incorrects: [10.2, 1.2, 120] },
                    { q: '2L 50mL', a: 2050, unit: 'mL', incorrects: [250, 2005, 2.5] },
                    { q: '250mL', a: 0.25, unit: 'L', incorrects: [2.5, 25, 2500] },
                    { q: '5dL', a: 0.5, unit: 'L', incorrects: [5, 50, 500] },
                    { q: '3.02L', a: 3020, unit: 'mL', incorrects: [302, 3002, 3.2] },
                    { q: '0.1L', a: 1, unit: 'dL', incorrects: [0.1, 10, 100] },
                    { q: '4dL 50mL', a: 450, unit: 'mL', incorrects: [45, 405, 50] },
                    { q: '0.7L 3dL', a: 10, unit: 'dL', incorrects: [7.3, 73, 703] },
                    { q: '75mL', a: 0.075, unit: 'L', incorrects: [0.75, 7.5, 750] },
                    { q: '120mL', a: 1.2, unit: 'dL', incorrects: [12, 0.12, 1200] },
                    { q: '5.5L', a: 5500, unit: 'mL', incorrects: [550, 55, 55000] },
                    { q: '0.6L', a: 6, unit: 'dL', incorrects: [0.06, 60, 600] },
                    { q: '1L 10mL', a: 1010, unit: 'mL', incorrects: [110, 1001, 1.1] },
                    { q: '2dL 5mL', a: 205, unit: 'mL', incorrects: [25, 2005, 2.5] },
                    { q: '350mL', a: 3.5, unit: 'dL', incorrects: [35, 0.35, 3500] },
                    { q: '800mL', a: 0.8, unit: 'L', incorrects: [8, 80, 8000] },
                    { q: '1.05L', a: 1050, unit: 'mL', incorrects: [150, 1005, 1.5] },
                    { q: '0.01L', a: 1, unit: 'cL', incorrects: [0.1, 10, 100] }
                ]
            },
             time: {
                easy: [
                    { q: '1分', a: 60, unit: '秒', incorrects: [1, 10, 6] },
                    { q: '3分', a: 180, unit: '秒', incorrects: [30, 300, 1800] },
                    { q: '1時間', a: 60, unit: '分', incorrects: [1, 10, 600] },
                    { q: '120秒', a: 2, unit: '分', incorrects: [1.2, 12, 20] },
                    { q: '180分', a: 3, unit: '時間', incorrects: [1.8, 18, 30] },
                    { q: '5分', a: 300, unit: '秒', incorrects: [50, 5, 3000] },
                    { q: '2時間', a: 120, unit: '分', incorrects: [20, 2, 1200] },
                    { q: '300秒', a: 5, unit: '分', incorrects: [3, 30, 0.5] },
                    { q: '240分', a: 4, unit: '時間', incorrects: [2.4, 24, 40] },
                    { q: '10分', a: 600, unit: '秒', incorrects: [100, 60, 6000] },
                    { q: '4時間', a: 240, unit: '分', incorrects: [40, 4, 2400] },
                    { q: '60秒', a: 1, unit: '分', incorrects: [0.6, 6, 10] },
                    { q: '60分', a: 1, unit: '時間', incorrects: [0.6, 6, 10] },
                    { q: '7分', a: 420, unit: '秒', incorrects: [70, 42, 4200] },
                    { q: '5時間', a: 300, unit: '分', incorrects: [50, 5, 3000] },
                    { q: '420秒', a: 7, unit: '分', incorrects: [4.2, 42, 70] },
                    { q: '360分', a: 6, unit: '時間', incorrects: [3.6, 36, 60] },
                    { q: '8分', a: 480, unit: '秒', incorrects: [80, 48, 4800] },
                    { q: '9時間', a: 540, unit: '分', incorrects: [90, 9, 5400] },
                    { q: '540秒', a: 9, unit: '分', incorrects: [5.4, 54, 90] }
                ],
                medium: [
                    { q: '10分', a: 600, unit: '秒', incorrects: [100, 60, 6000] },
                    { q: '2時間', a: 120, unit: '分', incorrects: [20, 2, 1200] },
                    { q: '360秒', a: 6, unit: '分', incorrects: [3.6, 36, 60] },
                    { q: '15分', a: 900, unit: '秒', incorrects: [150, 90, 9000] },
                    { q: '3時間', a: 180, unit: '分', incorrects: [30, 3, 1800] },
                    { q: '540秒', a: 9, unit: '分', incorrects: [5.4, 54, 90] },
                    { q: '45分', a: 2700, unit: '秒', incorrects: [450, 270, 27000] },
                    { q: '6時間', a: 360, unit: '分', incorrects: [60, 6, 3600] },
                    { q: '900秒', a: 15, unit: '分', incorrects: [9, 90, 1.5] },
                    { q: '20分', a: 1200, unit: '秒', incorrects: [200, 120, 12000] },
                    { q: '8時間', a: 480, unit: '分', incorrects: [80, 8, 4800] },
                    { q: '1200秒', a: 20, unit: '分', incorrects: [12, 120, 2] },
                    { q: '30分', a: 1800, unit: '秒', incorrects: [300, 180, 18000] },
                    { q: '10時間', a: 600, unit: '分', incorrects: [100, 10, 6000] },
                    { q: '2700秒', a: 45, unit: '分', incorrects: [27, 270, 4.5] },
                    { q: '1時間30分', a: 90, unit: '分', incorrects: [130, 1.3, 900] },
                    { q: '2分30秒', a: 150, unit: '秒', incorrects: [230, 2.3, 120] },
                    { q: '720分', a: 12, unit: '時間', incorrects: [7.2, 72, 1.2] },
                    { q: '3600秒', a: 60, unit: '分', incorrects: [36, 360, 6] },
                    { q: '1440分', a: 24, unit: '時間', incorrects: [14.4, 144, 2.4] }
                ],
                hard: [
                    { q: '1.5分', a: 90, unit: '秒', incorrects: [15, 150, 1.5] },
                    { q: '2.5時間', a: 150, unit: '分', incorrects: [25, 2.5, 1500] },
                    { q: '1分15秒', a: 75, unit: '秒', incorrects: [115, 1.15, 60] },
                    { q: '1時間10分', a: 70, unit: '分', incorrects: [110, 1.1, 60] },
                    { q: '100秒', a: '1分40秒', unit: '', incorrects: ['1分0秒', '10分0秒', '1分60秒'] },
                    { q: '75分', a: '1時間15分', unit: '', incorrects: ['1時間25分', '1時間5分', '7時間5分'] },
                    { q: '0.5分', a: 30, unit: '秒', incorrects: [5, 50, 0.05] },
                    { q: '0.75時間', a: 45, unit: '分', incorrects: [7.5, 0.75, 450] },
                    { q: '3分5秒', a: 185, unit: '秒', incorrects: [35, 305, 180] },
                    { q: '2時間5分', a: 125, unit: '分', incorrects: [205, 2.5, 120] },
                    { q: '200秒', a: '3分20秒', unit: '', incorrects: ['2分0秒', '3分0秒', '2分80秒'] },
                    { q: '100分', a: '1時間40分', unit: '', incorrects: ['1時間0分', '1時間60分', '10時間0分'] },
                    { q: '1.2分', a: 72, unit: '秒', incorrects: [12, 120, 7.2] },
                    { q: '3.1時間', a: 186, unit: '分', incorrects: [31, 310, 180] },
                    { q: '4分4秒', a: 244, unit: '秒', incorrects: [44, 404, 240] },
                    { q: '3時間30分', a: 210, unit: '分', incorrects: [330, 3.3, 180] },
                    { q: '90秒', a: '1分30秒', unit: '', incorrects: ['1分0秒', '1分90秒', '0分90秒'] },
                    { q: '150分', a: '2時間30分', unit: '', incorrects: ['2時間0分', '2時間50分', '1時間50分'] },
                    { q: '0.1時間', a: 6, unit: '分', incorrects: [1, 10, 60] },
                    { q: '0.1分', a: 6, unit: '秒', incorrects: [0.1, 1, 10] }
                ]
            },
            area: {
                easy: [
                    { q: '1㎡', a: 10000, unit: '㎠', incorrects: [100, 1000, 100000] },
                    { q: '1k㎡', a: 1000000, unit: '㎡', incorrects: [1000, 10000, 10000000] },
                    { q: '20000㎠', a: 2, unit: '㎡', incorrects: [0.2, 20, 200] },
                    { q: '3k㎡', a: 3000000, unit: '㎡', incorrects: [3000, 30000, 30000000] },
                    { q: '50000㎠', a: 5, unit: '㎡', incorrects: [0.5, 50, 500] },
                    { q: '1000000㎡', a: 1, unit: 'k㎡', incorrects: [0.1, 10, 100] },
                    { q: '5㎡', a: 50000, unit: '㎠', incorrects: [500, 5000, 500000] },
                    { q: '2k㎡', a: 2000000, unit: '㎡', incorrects: [2000, 20000, 20000000] },
                    { q: '80000㎠', a: 8, unit: '㎡', incorrects: [0.8, 80, 800] },
                    { q: '4k㎡', a: 4000000, unit: '㎡', incorrects: [4000, 40000, 40000000] },
                    { q: '10㎡', a: 100000, unit: '㎠', incorrects: [1000, 10000, 1000000] },
                    { q: '10k㎡', a: 10000000, unit: '㎡', incorrects: [10000, 100000, 100000000] },
                    { q: '100000㎠', a: 10, unit: '㎡', incorrects: [1, 100, 1000] },
                    { q: '5000000㎡', a: 5, unit: 'k㎡', incorrects: [0.5, 50, 500] },
                    { q: '3㎡', a: 30000, unit: '㎠', incorrects: [300, 3000, 300000] },
                    { q: '6k㎡', a: 6000000, unit: '㎡', incorrects: [6000, 60000, 60000000] },
                    { q: '200000㎠', a: 20, unit: '㎡', incorrects: [2, 200, 2000] },
                    { q: '8000000㎡', a: 8, unit: 'k㎡', incorrects: [0.8, 80, 800] },
                    { q: '4㎡', a: 40000, unit: '㎠', incorrects: [400, 4000, 400000] },
                    { q: '9k㎡', a: 9000000, unit: '㎡', incorrects: [9000, 90000, 90000000] }
                ],
                medium: [
                    { q: '10㎡', a: 100000, unit: '㎠', incorrects: [10000, 1000, 1000000] },
                    { q: '30k㎡', a: 30000000, unit: '㎡', incorrects: [30000, 300000, 300000000] },
                    { q: '1a', a: 100, unit: '㎡', incorrects: [10, 1000, 10000] },
                    { q: '1ha', a: 10000, unit: '㎡', incorrects: [100, 1000, 100000] },
                    { q: '500000㎠', a: 50, unit: '㎡', incorrects: [5, 500, 5000] },
                    { q: '25000000㎡', a: 25, unit: 'k㎡', incorrects: [2.5, 250, 2500] },
                    { q: '5a', a: 500, unit: '㎡', incorrects: [50, 5000, 50000] },
                    { q: '3ha', a: 30000, unit: '㎡', incorrects: [300, 3000, 300000] },
                    { q: '1200000㎠', a: 120, unit: '㎡', incorrects: [12, 1200, 12000] },
                    { q: '75000000㎡', a: 75, unit: 'k㎡', incorrects: [7.5, 750, 7500] },
                    { q: '10a', a: 1000, unit: '㎡', incorrects: [100, 10000, 100000] },
                    { q: '5ha', a: 50000, unit: '㎡', incorrects: [500, 5000, 500000] },
                    { q: '20a', a: 2000, unit: '㎡', incorrects: [200, 20000, 200000] },
                    { q: '8ha', a: 80000, unit: '㎡', incorrects: [800, 8000, 800000] },
                    { q: '1000000㎠', a: 100, unit: '㎡', incorrects: [10, 1000, 10000] },
                    { q: '50a', a: 5000, unit: '㎡', incorrects: [500, 50000, 500000] },
                    { q: '12ha', a: 120000, unit: '㎡', incorrects: [1200, 12000, 1200000] },
                    { q: '200000㎠', a: 200, unit: '㎡', incorrects: [20, 2000, 20000] },
                    { q: '70a', a: 7000, unit: '㎡', incorrects: [700, 70000, 700000] },
                    { q: '15ha', a: 150000, unit: '㎡', incorrects: [1500, 15000, 1500000] }
                ],
                hard: [
                    { q: '1.5㎡', a: 15000, unit: '㎠', incorrects: [1500, 150, 150000] },
                    { q: '0.5k㎡', a: 500000, unit: '㎡', incorrects: [50000, 5000, 5000000] },
                    { q: '1a', a: 100, unit: '㎡', incorrects: [10, 1000, 10000] },
                    { q: '1ha', a: 10000, unit: '㎡', incorrects: [100, 1000, 100000] },
                    { q: '0.1a', a: 10, unit: '㎡', incorrects: [1, 100, 1000] },
                    { q: '0.1ha', a: 1000, unit: '㎡', incorrects: [100, 10000, 100000] },
                    { q: '1.2a', a: 120, unit: '㎡', incorrects: [12, 1200, 12000] },
                    { q: '2.5ha', a: 25000, unit: '㎡', incorrects: [2500, 250, 250000] },
                    { q: '50㎠', a: 0.005, unit: '㎡', incorrects: [0.05, 0.5, 5] },
                    { q: '300㎡', a: 0.03, unit: 'ha', incorrects: [0.3, 3, 30] },
                     { q: '1k㎡', a: 100, unit: 'ha', incorrects: [10, 1000, 10000] },
                    { q: '1ha', a: 100, unit: 'a', incorrects: [10, 1000, 10000] },
                    { q: '0.01k㎡', a: 1, unit: 'ha', incorrects: [0.1, 10, 100] },
                    { q: '0.01ha', a: 1, unit: 'a', incorrects: [0.1, 10, 100] },
                    { q: '20a', a: 0.2, unit: 'ha', incorrects: [2, 20, 200] },
                    { q: '500a', a: 5, unit: 'ha', incorrects: [0.5, 50, 500] },
                    { q: '3.5a', a: 350, unit: '㎡', incorrects: [35, 3.5, 3500] },
                    { q: '0.8ha', a: 8000, unit: '㎡', incorrects: [800, 80, 80000] },
                    { q: '150000㎡', a: 15, unit: 'ha', incorrects: [1.5, 150, 1500] },
                    { q: '2000000㎡', a: 2, unit: 'k㎡', incorrects: [0.2, 20, 200] }
                ]
            }
        };
        const senseQuestions = {
            length: [
                { q: 'きみの学校のプールの長さは、だいたいどのくらいかな？', a: '25m', incorrects: ['25cm', '25km', '250m'] },
                { q: 'つまようじ1本の長さは、だいたいどのくらい？', a: '6cm', incorrects: ['6mm', '6m', '60cm'] },
                { q: 'トイレットペーパー1個分の長さは、だいたいどのくらい？', a: '30m', incorrects: ['30cm', '3m', '300m'] },
                { q: '消しゴムの短い辺の長さは、だいたいどのくらい？', a: '2cm', incorrects: ['2mm', '0.2cm', '20cm'] },
                { q: 'ランリュックの横はばは、だいたいどのくらい？', a: '30cm', incorrects: ['3cm', '3m', '0.3cm'] },
                { q: '教室のたての長さは、だいたいどのくらい？', a: '8m', incorrects: ['8cm', '80m', '0.8m'] },
                { q: '東京から大阪までのきょりは、だいたいどのくらい？', a: '500km', incorrects: ['500m', '50km', '5000km'] },
                { q: '身長1m は、だいたいどのくらいの高さ？', a: '小学3〜4年生のむねの高さ', incorrects: ['大人の人の頭の上', 'えんぴつくらいの高さ', '車の長さ'] },
                { q: '1mm の例として正しいのは？', a: 'シャープペンのしんの太さ', incorrects: ['ボールペンの長さ', 'ノートのあつさ', 'きみの身長'] },
                { q: '1km の例として正しいのは？', a: '歩いて15分くらいのきょり', incorrects: ['学校のろうかの長さ', 'となり町までのきょり', '日本からアメリカまでのきょり'] },
                { q: '1cm の例として正しいのは？', a: '小指のつめの幅', incorrects: ['人さし指の長さ', '本のあつさ', 'きみの身長'] },
                { q: '1m の例として正しいのは？', a: '大人の人がりょう手を広げたくらい', incorrects: ['ボールペンの長さ', 'きみの身長の半分', '教室のたての長さ'] },
                { q: '小学校のてつぼうの高さは、だいたいどのくらい？', a: '1.2m', incorrects: ['12cm', '12m', '0.12m'] },
                { q: '家から学校までのきょりは、だいたいどのくらい？', a: '1km', incorrects: ['10m', '100m', '10cm'] },
                { q: '日本のいちばん長い島の長さは、だいたいどのくらい？', a: '3000km', incorrects: ['300km', '3000m', '30000km'] },
                { q: '教科書1さつのあつさは、だいたいどのくらい？', a: '1cm', incorrects: ['1mm', '10cm', '0.1mm'] },
                { q: '消しゴムの長い辺の長さは、だいたいどのくらい？', a: '4cm', incorrects: ['4mm', '40cm', '0.4cm'] },
                { q: 'サッカーボールの直径は、だいたいどのくらい？', a: '22cm', incorrects: ['22mm', '2.2cm', '2.2m'] },
                { q: '日本でいちばん高い山（富士山）の高さは、だいたいどのくらい？', a: '3776m', incorrects: ['3776cm', '3776km', '377.6m'] },
                { q: 'はがき1枚のたての長さは、だいたいどのくらい？', a: '15cm', incorrects: ['1.5cm', '15mm', '150cm'] }
            ],
            weight: [
                { q: '5円玉1まいの重さは、だいたいどのくらい？', a: '3.75g', incorrects: ['37.5g', '0.375g', '375g'] },
                { q: '牛乳パック1本（1L）の重さは、だいたいどのくらい？', a: '1kg', incorrects: ['1g', '10kg', '100g'] },
                { q: '小学校1年生の重さは、だいたいどのくらい？', a: '20kg', incorrects: ['2kg', '200g', '200kg'] },
                { q: 'ティッシュペーパー1箱の重さは、だいたいどのくらい？', a: '200g', incorrects: ['20g', '2kg', '20g'] },
                { q: '1円玉1まいの重さは、だいたいどのくらい？', a: '1g', incorrects: ['0.1g', '10g', '1kg'] },
                { q: '大型のゾウの重さは、だいたいどのくらい？', a: '5t', incorrects: ['500kg', '50kg', '50t'] },
                { q: '教科書1さつの重さは、だいたいどのくらい？', a: '500g', incorrects: ['50g', '5kg', '5000g'] },
                { q: 'バケツいっぱいの水の重さは、だいたいどのくらい？', a: '10kg', incorrects: ['1kg', '100kg', '10g'] },
                { q: '消しゴム1個の重さは、だいたいどのくらい？', a: '10g', incorrects: ['1g', '100g', '1kg'] },
                { q: 'お米1袋（5kg）の重さは、だいたいどのくらい？', a: '5kg', incorrects: ['500g', '50kg', '0.5kg'] },
                { q: '小学校の先生の重さは、だいたいどのくらい？', a: '60kg', incorrects: ['6kg', '600kg', '60g'] },
                { q: '車1台の重さは、だいたいどのくらい？', a: '1t', incorrects: ['100kg', '10t', '1000g'] },
                { q: 'クリップ1個の重さは、だいたいどのくらい？', a: '0.5g', incorrects: ['5g', '0.05g', '50g'] },
                { q: 'リンゴ1個の重さは、だいたいどのくらい？', a: '300g', incorrects: ['30g', '3kg', '3000g'] },
                { q: '猫1ぴきの重さは、だいたいどのくらい？', a: '4kg', incorrects: ['400g', '40kg', '0.4kg'] },
                { q: '野球のボールの重さは、だいたいどのくらい？', a: '150g', incorrects: ['15g', '1.5kg', '1500g'] },
                { q: '力士1人の重さは、だいたいどのくらい？', a: '150kg', incorrects: ['15kg', '1.5t', '150g'] },
                { q: 'スプーン1杯の砂糖の重さは、だいたいどのくらい？', a: '4g', incorrects: ['0.4g', '40g', '0.04g'] },
                { q: '小学生のランドセルの重さは、だいたいどのくらい？', a: '1kg', incorrects: ['100g', '5kg', '10kg'] },
                { q: '日本で一番重いカブトムシは、だいたいどのくらい？', a: '100g', incorrects: ['10g', '1kg', '1000g'] }
            ],
            volume: [
                { q: '計量スプーン（大さじ）1ぱいは、だいたいどのくらい？', a: '15mL', incorrects: ['1.5mL', '150mL', '1dL'] },
                { q: '給食で出てくる牛乳びん1本は、だいたいどのくらい？', a: '200mL', incorrects: ['20mL', '2L', '0.2mL'] },
                { q: 'おうちのおふろにお湯をためると、だいたいどのくらい？', a: '200L', incorrects: ['20L', '200mL', '2000L'] },
                { q: 'コップ1ぱいの水の量は、だいたいどのくらい？', a: '200mL', incorrects: ['20mL', '2L', '200dL'] },
                { q: 'ペットボトル（小さいサイズ）1本の量は、だいたいどのくらい？', a: '500mL', incorrects: ['50mL', '5L', '0.05L'] },
                { q: '1dL の例として正しいのは？', a: '紙コップ1ぱい', incorrects: ['牛乳パック1本', 'ペットボトル1本', '計量スプーン1ぱい'] },
                { q: '1L の例として正しいのは？', a: '牛乳パック1本', incorrects: ['コップ1ぱい', 'バケツ1ぱい', 'おふろ1つ'] },
                { q: 'おちょこ1ぱいの量は、だいたいどのくらい？', a: '20mL', incorrects: ['2mL', '200mL', '0.2L'] },
                { q: '金魚ばちに入る水の量は、だいたいどのくらい？', a: '5L', incorrects: ['500mL', '50L', '0.5L'] },
                { q: '味噌汁のおわん1つ分の量は、だいたいどのくらい？', a: '150mL', incorrects: ['15mL', '1.5L', '15dL'] },
                { q: 'ペットボトル（大きいサイズ）1本の量は、だいたいどのくらい？', a: '2L', incorrects: ['200mL', '20L', '20dL'] },
                { q: '水たまり1つ分の水は、だいたいどのくらい？', a: '50mL', incorrects: ['5mL', '0.5L', '5L'] },
                { q: '水筒に入る水の量は、だいたいどのくらい？', a: '800mL', incorrects: ['80mL', '8L', '8dL'] },
                { q: 'コーヒーカップ1ぱいの量は、だいたいどのくらい？', a: '180mL', incorrects: ['18mL', '1.8L', '18dL'] },
                { q: 'バケツ1つに入る水の量は、だいたいどのくらい？', a: '10L', incorrects: ['1L', '100mL', '100L'] },
                { q: '雨つぶ1つの量は、だいたいどのくらい？', a: '0.1mL', incorrects: ['1mL', '0.01mL', '1L'] },
                { q: 'プールに入る水の量は、だいたいどのくらい？', a: '200kL', incorrects: ['200L', '200mL', '2000kL'] } // kLも感覚として
            ],
            time: [
                { q: 'カップラーメンができるのを待つ時間は、だいたいどのくらい？', a: '3分', incorrects: ['30秒', '10分', '30分'] },
                { q: '授業時間（小学校）は、だいたいどのくらい？', a: '45分', incorrects: ['15分', '60分', '90分'] },
                { q: '1日は、何時間？', a: '24時間', incorrects: ['12時間', '36時間', '10時間'] },
                { q: 'まばたき1回にかかる時間は、だいたいどのくらい？', a: '0.1秒', incorrects: ['1秒', '0.01秒', '1分'] },
                { q: '心臓が1回ドキドキする時間は、だいたいどのくらい？', a: '1秒', incorrects: ['0.1秒', '1分', '1時間'] },
                { q: '夜、ねむる時間は、だいたいどのくらい？', a: '8時間', incorrects: ['3時間', '12時間', '1時間'] },
                { q: '運動会のかけっこ（50m）にかかる時間は、だいたいどのくらい？', a: '10秒', incorrects: ['1秒', '1分', '30秒'] },
                { q: '歯をみがく時間は、だいたいどのくらい？', a: '3分', incorrects: ['30秒', '1分', '10分'] },
                { q: '1秒間の例として正しいのは？', a: '心臓が1回ドキドキする時間', incorrects: ['まばたき1回にかかる時間', 'カップラーメンができるのを待つ時間', '授業時間'] },
                { q: '1分間の例として正しいのは？', a: 'カップラーメンができるのを待つ時間', incorrects: ['授業時間', '夜ねむる時間', 'まばたき1回にかかる時間'] },
                { q: '1時間の例として正しいのは？', a: '授業時間より少し長い時間', incorrects: ['夜ねむる時間', 'まばたき1回にかかる時間', '歯をみがく時間'] },
                { q: '1日の例として正しいのは？', a: '朝おきてから夜ねむるまで+ねむる時間', incorrects: ['授業が全部終わるまで', '学校にいる時間', '1週間の時間'] },
                { q: 'アニメ番組1本の長さは、だいたいどのくらい？', a: '30分', incorrects: ['15分', '1時間', '10分'] },
                { q: '1週間は、どのくらい？', a: '7日', incorrects: ['3日', '10日', '1ヶ月'] },
                { q: '1ヶ月は、だいたいどのくらい？', a: '30日', incorrects: ['7日', '50日', '100日'] },
                { q: '1年は、だいたいどのくらい？', a: '365日', incorrects: ['30日', '100日', '500日'] },
                { q: '地球が太陽のまわりを一周する時間は、だいたいどのくらい？', a: '1年', incorrects: ['1日', '1ヶ月', '1時間'] },
                { q: '地球が自分でぐるっと一周する時間は、だいたいどのくらい？', a: '1日', incorrects: ['1時間', '1分', '1年'] },
                { q: '宇宙飛行士が地球のまわりを一周する時間は、だいたいどのくらい？', a: '90分', incorrects: ['9分', '9時間', '90秒'] }
            ],
            area: [
                { q: 'B5サイズのノートを広げた広さは、だいたいどのくらい？', a: '900㎠', incorrects: ['90㎠', '9000㎠', '90㎡'] },
                { q: '小学校の教室の広さは、だいたいどのくらい？', a: '64㎡', incorrects: ['6.4㎡', '640㎡', '6400㎡'] },
                { q: '1a は、だいたいどのくらいの広さ？', a: '10m × 10m の正方形の広さ', incorrects: ['1m × 1m の広さ', '100m × 100m の広さ', '1km × 1km の広さ'] },
                { q: '1ha は、だいたいどのくらいの広さ？', a: '小学校のグラウンドの広さ', incorrects: ['教室の広さ', '東京ドームの広さ', '日本の面積'] },
                { q: 'はがき1枚の広さは、だいたいどのくらい？', a: '150㎠', incorrects: ['15㎠', '1500㎠', '15㎠'] }, // 10cm x 14.8cm ≒ 150㎠
                { q: 'たたみ1じょうの広さは、だいたいどのくらい？', a: '1.65㎡', incorrects: ['16.5㎡', '0.165㎡', '165㎡'] },
                { q: '東京ドームの広さは、だいたいどのくらい？', a: '4.7ha', incorrects: ['47ha', '0.47ha', '470ha'] },
                { q: '消しゴムの底面の広さは、だいたいどのくらい？', a: '8㎠', incorrects: ['0.8㎠', '80㎠', '8㎡'] },
                { q: 'A4コピー用紙1枚の広さは、だいたいどのくらい？', a: '625㎠', incorrects: ['62.5㎠', '6250㎠', '6.25㎡'] },
                { q: '日本の面積は、だいたいどのくらい？', a: '38万k㎡', incorrects: ['38万㎡', '380k㎡', '3800k㎡'] },
                { q: 'サッカー場1面の広さは、だいたいどのくらい？', a: '0.7ha', incorrects: ['7ha', '0.07ha', '70ha'] },
                { q: 'テニスコート（シングルス）の広さは、だいたいどのくらい？', a: '260㎡', incorrects: ['26㎡', '2600㎡', '2.6㎡'] },
                { q: 'バスケットボール場1面の広さは、だいたいどのくらい？', a: '420㎡', incorrects: ['42㎡', '4200㎡', '4.2㎡'] },
                { q: '日本で一番大きい湖（琵琶湖）の広さは、だいたいどのくらい？', a: '670k㎡', incorrects: ['67k㎡', '6.7k㎡', '6700k㎡'] },
                { q: '学校の体育館の広さは、だいたいどのくらい？', a: '800㎡', incorrects: ['80㎡', '8000㎡', '8k㎡'] },
                { q: '100㎠ は、だいたいどのくらいの広さ？', a: '10cm × 10cm の正方形の広さ', incorrects: ['1cm × 1cm の広さ', '1m × 1m の広さ', '1mm × 1mm の広さ'] },
                { q: '50㎡ は、だいたいどのくらいの広さ？', a: '小学校の教室より少しせまい広さ', incorrects: ['たたみ1じょうの広さ', 'サッカー場1面の広さ', '東京ドームの広さ'] },
                { q: '1k㎡ は、だいたいどのくらいの広さ？', a: '歩いて15分くらいの正方形の広さ', incorrects: ['教室の広さ', '学校のグラウンドの広さ', '東京ドームの広さ'] },
                { q: 'ハトスタジアムのグラウンドの広さは、だいたいどのくらい？', a: '1ha', incorrects: ['10ha', '0.1ha', '100ha'] },
                { q: '切手1枚の広さは、だいたいどのくらい？', a: '4㎠', incorrects: ['0.4㎠', '40㎠', '0.04㎠'] }
            ]
        };
        const unitNames = { length: '長さ', weight: '重さ', volume: 'かさ', time: '時間', area: '面積' };
        const levelNames = { easy: '初級', medium: '中級', hard: '上級' };

        // --- 状態管理 ---
        let currentUnit = '';
        let currentMode = '';
        let currentLevel = '';
        let score = 0;
        let gameTimer;
        const timeLimit = 60; // 制限時間（秒）
        let timeRemaining;
        let questionsPool = [];
        let currentQuestionIndex = -1;

        // --- 画面遷移 ---
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
            stopGameTimer(); // 画面が切り替わったら必ずタイマーを止める
            resetFeedback();
        }

        // --- 単位・モード・レベル選択 ---
        function selectUnit(unit) {
            currentUnit = unit;
            document.getElementById('mode-select-title').innerText = `【${unitNames[currentUnit]}】のモードをえらぼう！`;
            showScreen('mode-select-screen'); // ★修正点1: 次の画面に遷移させる
        }

        function selectMode(mode) {
            currentMode = mode;
            if (currentMode === 'practice') {
                showScreen('level-select-screen');
            } else { // sense モード
                currentLevel = '';
                startGame();
            }
        }

        function startPractice(level) {
            currentLevel = level;
            startGame();
        }

        // --- ゲーム開始 ---
        function startGame() {
            score = 0;
            document.getElementById('score').innerText = score;

            if (currentMode === 'practice') {
                document.getElementById('question-screen-title').innerText = `【${unitNames[currentUnit]}・${levelNames[currentLevel]}】れんしゅうもんだい`;
                questionsPool = [...practiceQuestions[currentUnit][currentLevel]];
            } else { // sense モード
                document.getElementById('question-screen-title').innerText = `【${unitNames[currentUnit]}】たんいをかんじてみよう！`;
                questionsPool = [...senseQuestions[currentUnit]];
            }
            
            shuffleArray(questionsPool);
            currentQuestionIndex = -1;
            
            showScreen('question-screen');
            startGameTimer();
            nextQuestion();
        }

        // --- ゲームタイマー機能 ---
        function startGameTimer() {
            timeRemaining = timeLimit;
            const timerCountEl = document.getElementById('timer-count');
            timerCountEl.innerText = timeRemaining;
            timerCountEl.style.color = '#d9534f';
            
            stopGameTimer(); // 念のため既存のタイマーをクリア

            gameTimer = setInterval(() => {
                timeRemaining--;
                timerCountEl.innerText = timeRemaining;

                if (timeRemaining <= 5) {
                    timerCountEl.style.color = 'red';
                }

                if (timeRemaining <= 0) {
                    stopGameTimer();
                    showResult();
                }
            }, 1000);
        }

        function stopGameTimer() {
            clearInterval(gameTimer);
        }

        // --- 問題進行 ---
        function nextQuestion() {
            if (timeRemaining <= 0) return; // 時間切れなら何もしない

            resetFeedback();
            currentQuestionIndex++;
            if (currentQuestionIndex >= questionsPool.length) {
                currentQuestionIndex = 0; // 問題が尽きたら最初からループ
                shuffleArray(questionsPool);
            }

            const questionData = questionsPool[currentQuestionIndex];
            const answerUnit = questionData.unit || '';
            document.getElementById('question-text').innerHTML = `${questionData.q}${answerUnit ? ' は？' : ''} <span class="highlight">${answerUnit}</span>`;

            let choices = [questionData.a, ...questionData.incorrects];
            shuffleArray(choices);

            const choicesGrid = document.getElementById('choices-grid');
            choicesGrid.innerHTML = '';
            choices.forEach(choice => {
                const button = document.createElement('button');
                button.classList.add('btn', 'btn-answer');
                const choiceText = (typeof choice === 'number' && Number.isInteger(choice)) ? choice.toString() : choice;
                button.innerText = choiceText;
                button.onclick = () => checkAnswer(choice, questionData.a);
                choicesGrid.appendChild(button);
            });
        }

        // --- 回答チェック ---
        function checkAnswer(selectedAnswer, correctAnswer) {
            disableChoices();
            const feedbackEl = document.getElementById('feedback');
            
            let isCorrect = (typeof correctAnswer === 'number')
                ? parseFloat(selectedAnswer) === correctAnswer
                : selectedAnswer === correctAnswer;

            if (isCorrect) {
                score += 100;
                document.getElementById('score').innerText = score;
                const correctMessages = ["ピンポン！せいかい！", "すごい！そのとおり！", "よくできたね！", "さすが！たんいマスター！"];
                feedbackEl.innerText = correctMessages[Math.floor(Math.random() * correctMessages.length)];
                feedbackEl.classList.add('correct');
            } else {
                const incorrectMessages = ["ブブー！おしい！", "ちがうみたい…", "もういちどかんがえてみよう！"];
                let message = incorrectMessages[Math.floor(Math.random() * incorrectMessages.length)];
                const formattedCorrectAnswer = (typeof correctAnswer === 'number' && Number.isInteger(correctAnswer)) ? correctAnswer.toString() : correctAnswer;
                message += `\nせいかいは「${formattedCorrectAnswer}」だよ。`;
                feedbackEl.innerText = message;
                feedbackEl.classList.add('incorrect');
            }

            showFeedback();
            setTimeout(() => {
                if(timeRemaining > 0) nextQuestion();
            }, 1200); // 1.2秒後に次の問題へ
        }

        // --- 結果表示 ---
        function showResult() {
            showScreen('result-screen');
            document.getElementById('final-score').innerText = score;
            
            const medal = getMedal(score);
            document.getElementById('medal-icon').innerText = medal.icon;
            document.getElementById('medal-name').innerText = medal.name;
            document.getElementById('result-message').innerHTML = `<span style="font-size: 2rem; vertical-align: middle;">🎓</span> ${medal.message}`;
        }

        function getMedal(score) {
            if (score >= 2000) return { icon: '🌈', name: 'レインボーメダル', message: 'すばらしい！きみはもはや「たんい神」じゃ！' };
            if (score >= 1500) return { icon: '🥇', name: '金のメダル', message: 'すごいぞ！たんいマスターの称号をさずけよう！' };
            if (score >= 1000) return { icon: '🥈', name: '銀のメダル', message: 'よくがんばった！たんい博士まであと一歩じゃ！' };
            if (score >= 500)  return { icon: '🥉', name: '銅のメダル', message: 'やったね！だいぶ単位になれてきたのう！' };
            return { icon: '📜', name: '参加賞', message: 'おつかれさま！つぎはメダルを目指してがんばろう！' };
        }

        function restartQuiz() {
            // 現在の設定でゲームを再開する
            startGame();
        }

        // --- 補助関数 ---
        function showFeedback() {
             document.getElementById('feedback').style.display = 'block';
        }

        function resetFeedback() {
            const feedbackEl = document.getElementById('feedback');
            feedbackEl.style.display = 'none';
            feedbackEl.className = '';
            enableChoices();
        }

        function disableChoices() {
            document.querySelectorAll('#choices-grid .btn-answer').forEach(button => {
                button.disabled = true;
            });
        }

         function enableChoices() {
            document.querySelectorAll('#choices-grid .btn-answer').forEach(button => {
                button.disabled = false;
            });
        }
        
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
        
        function backToModeSelect() {
            if (currentMode === 'practice') {
                showScreen('level-select-screen');
            } else {
                showScreen('mode-select-screen');
            }
        }
    
    </script>
</body>
</html>
